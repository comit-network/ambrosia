{
	"info": {
		"_postman_id": "7f4ce528-698e-476e-9942-d9c002416ab6",
		"name": "CND Orderbook REST API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "ARCHIVED",
			"item": [
				{
					"name": "GET / (Taker)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{TAKER_CND_URL}}",
							"host": [
								"{{TAKER_CND_URL}}"
							]
						},
						"description": "GET /\n"
					},
					"response": []
				},
				{
					"name": "POST /dial (Maker2Taker)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"addresses\": [\"/ip4/124.19.31.4/tcp/9939\"]\n}"
						},
						"url": {
							"raw": "{{MAKER_CND_URL}}/dial",
							"host": [
								"{{MAKER_CND_URL}}"
							],
							"path": [
								"dial"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET /orders (Maker)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{MAKER_CND_URL}}/orders",
							"host": [
								"{{MAKER_CND_URL}}"
							],
							"path": [
								"orders"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "GET / (Maker) >> MAKER_MULTI_ADR",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "5145203a-6cdd-4fd1-ac8a-913d2e92c445",
						"exec": [
							"var json = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"MAKER_MULTI_ADR\", JSON.stringify(json.listen_addresses)); // save as JSON, because it will be used in next request body"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{MAKER_CND_URL}}",
					"host": [
						"{{MAKER_CND_URL}}"
					]
				},
				"description": "GET /\nSet MAKER_MULTI_ADR variable (see script in Tests tab)"
			},
			"response": []
		},
		{
			"name": "POST /dial (Taker2Maker)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"addresses\": {{MAKER_MULTI_ADR}}\n}"
				},
				"url": {
					"raw": "{{TAKER_CND_URL}}/dial",
					"host": [
						"{{TAKER_CND_URL}}"
					],
					"path": [
						"dial"
					]
				}
			},
			"response": []
		},
		{
			"name": "POST /orders (Maker)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"position\": \"sell\",\n    \"bitcoin_amount\": \"19\",\n    \"bitcoin_ledger\": \"regtest\",\n    \"bitcoin_absolute_expiry\": 400,\n    \"ethereum_amount\": \"89000\",\n    \"token_contract\": \"0x62d69f6867a0a084c6d313943dc22023bc263691\",\n    \"ethereum_ledger\": {\"chain_id\":1337},\n    \"ethereum_absolute_expiry\": 600,\n    \"bitcoin_identity\": \"1F1tAaz5x1HUXrCNLbtMDqcw6o5GNn4xqX\",\n    \"ethereum_identity\": \"0x00a329c0648769a73afac7f9381e08fb43dbea72\",\n    \"maker_addr\": \"/ip4/127.0.0.1/tcp/9939\"\n}"
				},
				"url": {
					"raw": "{{MAKER_CND_URL}}/orders",
					"host": [
						"{{MAKER_CND_URL}}"
					],
					"path": [
						"orders"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /orders (Taker) >> ORDER_ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d3f05bea-bffe-4889-90bd-43ff0b238e35",
						"exec": [
							"var json = JSON.parse(responseBody);",
							"let lastOrder = json.entities[0];",
							"let orderId = lastOrder.properties.id;",
							"postman.setEnvironmentVariable(\"ORDER_ID\", orderId); // save as string because it will be part of the URL for posting order-take"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{TAKER_CND_URL}}/orders",
					"host": [
						"{{TAKER_CND_URL}}"
					],
					"path": [
						"orders"
					]
				},
				"description": "Set ORDER_ID variable (see script in Tests tab)"
			},
			"response": []
		},
		{
			"name": "POST /orders/:id/take (Taker) >> SWAP_LOCATION",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"bitcoin_identity\": \"1F1tAaz5x1HUXrCNLbtMDqcw6o5GNn4xqX\",\n    \"ethereum_identity\": \"0x5617ACCC620010D9A6b27C434210f90C6F10EdF6\"\n}"
				},
				"url": {
					"raw": "{{TAKER_CND_URL}}/orders/{{ORDER_ID}}/take",
					"host": [
						"{{TAKER_CND_URL}}"
					],
					"path": [
						"orders",
						"{{ORDER_ID}}",
						"take"
					]
				},
				"description": "Set SWAP_LOCATION variable (see script in Tests tab)"
			},
			"response": []
		},
		{
			"name": "GET /swaps/:id (Taker)",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{TAKER_CND_URL}}{{SWAP_LOCATION}}",
					"host": [
						"{{TAKER_CND_URL}}{{SWAP_LOCATION}}"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}